# SEO-Pocket — Project Brief

## Суть проекта

SEO-аналитический инструмент для анализа конкурентов в affiliate/gambling нише. Ключевая фича — **просмотр сайта как Googlebot** для выявления cloaking и анализа canonical страниц.

---

## Референс

**affiliate.fm** — https://affiliate.fm/ru/tools/

Скриншоты интерфейса:
- Показывает HTML lang, Canonical, Alternate, Hreflang
- Исходный код как видит Google
- Google Cache данные
- Определение cloaking (разница между тем что видит user и Googlebot)

---

## Ключевые фичи (приоритет)

### 1. Смотреть как Googlebot (ГЛАВНЫЙ ПРИОРИТЕТ)
**Дедлайн:** до конца января

Что должно делать:
- Вводишь URL → получаешь страницу как её видит Googlebot
- Вытягивать: H1, Title, Description, Meta robots, Status code
- Показывать исходный код
- Определять Hreflang, Alternate страницы
- **Выявлять Cloaking** — сравнение вида для user vs Googlebot

**Техническая сложность:**
- Это "лазейка Google" — не известно сколько будет работать
- Конкуренты (affiliate.fm) делают через API, код закрыт
- Попытки через Puppeteer упираются в rate limiting и требование авторизации

**Возможные подходы:**
1. Эмуляция Googlebot User-Agent через Puppeteer/Playwright
2. Google Rich Results Test API — https://search.google.com/test/rich-results/result
3. Reverse engineering affiliate.fm API
4. Авторизованный Google аккаунт + scraping

### 2. Canonical страница (выбранная Google)
- Показывать какой canonical Google реально выбрал
- Важно для анализа PBN-сетей где много canonical ссылаются друг на друга
- Конкуренты используют это для быстрого определения куда лить ссылки

### 3. Google Cache
- Показывать закэшированную версию страницы
- Дополнительные данные: alternate, hreflang из кэша
- Сравнение с текущей версией

---

## Дальнейшие фичи (после MVP)

### Cloaking Detection
```
┌─────────────────┬─────────────────┐
│   User View     │  Googlebot View │
├─────────────────┼─────────────────┤
│ H1: "Restaurant"│ H1: "Casino"    │
│ Links: 5        │ Links: 50       │
│ Images: 10      │ Images: 2       │
└─────────────────┴─────────────────┘
→ CLOAKING DETECTED!
```

### История изменений
- База данных с историей canonical, контента
- Timeline: "12 января — добавили поддомен", "15 января — сменили canonical"
- Redis для кэширования + Postgres для хранения

### Социальные сигналы
- Facebook shares/likes
- Общая вовлечённость
- Помогает понять почему сайт ранжируется

### Интеграция Ahrefs
- Бэклинки конкурентов
- PBN сети
- Анкоры

### Парсинг выдачи
- По ключевым словам
- Топ-10 конкурентов
- Их структура и тактики

### Генератор сайтов
- Уже есть наработки (отдельная система)
- Автоматическое создание + домен + деплой
- Cloudflare проксирование (20-50 сайтов на сервер)

---

## Техническая архитектура

### Stack (предположительно)
```
Frontend: React/Next.js (дизайн как у Claude)
Backend: FastAPI / Node.js
Database: PostgreSQL + Redis
Scraping: Playwright / Puppeteer
```

### Инфраструктура
```
┌─────────────────────────────────────┐
│           SEO-Pocket                │
├─────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐        │
│  │ Frontend │  │ Backend  │        │
│  │  (React) │  │ (FastAPI)│        │
│  └──────────┘  └──────────┘        │
├─────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐        │
│  │ Postgres │  │  Redis   │        │
│  │ (history)│  │ (cache)  │        │
│  └──────────┘  └──────────┘        │
├─────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐        │
│  │ Puppeteer│  │ Ahrefs   │        │
│  │ Workers  │  │   API    │        │
│  └──────────┘  └──────────┘        │
└─────────────────────────────────────┘
```

### База данных — умное хранение
- Записывать ВСЕ данные (данные = золото)
- Отображать по запросу (не грузить систему)
- Кнопка "Просмотреть полную историю" → запрос в БД
- Масштабирование через дополнительные Postgres контейнеры

---

## Существующие наработки Димы

У Димы есть прототип:
- Cloaking Detection вкладка
- Overview с title, status
- Screenshot через Web Archive
- Порт 667 на его сервере
- Нужно получить архив проекта

---

## UI/UX требования

**Референс дизайна:** Claude (chat interface)

**Принципы:**
- Не перегружать интерфейс
- Данные показывать по запросу
- Вкладки: Overview, Googlebot View, Source Code, Screenshot, History
- Кнопка "Добавить в историю/кейс"

**Интерфейс affiliate.fm:**
- Поле ввода URL по центру
- Теги сверху: HTML Lang, Canonical, Alternate, Hreflang
- Кнопки: "Исходный код", "Поделиться"
- Предупреждение о нестабильности (требует перезапуска сервера)

---

## Action Items

### Алексей (я):
1. [ ] Изучить и реализовать функцию Googlebot View
2. [ ] Получить исходный код, H1, Title, Description
3. [ ] Проработать обход ограничений (Puppeteer/API/авторизация)
4. [ ] Система хранения истории canonical с кэшированием
5. [ ] Не распыляться — фокус на основной задаче

### Дима:
1. [ ] Прислать архив с кодом прототипа
2. [ ] Расширять функционал после MVP
3. [ ] Анализ соцсигналов и идеи развития

---

## Полезные ссылки

- **affiliate.fm tools:** https://affiliate.fm/ru/tools/
- **Google Rich Results Test:** https://search.google.com/test/rich-results/result
- **Google Cache:** webcache.googleusercontent.com

---

## Транскрипция созвона

### Участники:
- Dima Klan — заказчик, SEO специалист
- Алексей Николаенко — разработчик

### Ключевые моменты:

**Про Googlebot View (02:40):**
> "Canonical-страница, выбранная Google, это такая хуйня классная, анализа конкурентов в тир-один. Если ее правильно настроить, ты когда вводишь URL какой-то, особенно если какой-то паразит сидит, у него можно посмотреть, какой Canonical Google выбрал для его сайта."

**Про лазейку Google:**
> "Это лазейка какая-то есть. Что можно выкачивать вот эти данные и смотреть как Googlebot. И быстро находить. Неизвестно, сколько еще жить эта лазейка будет. Потому что это относительно новое что-то."

**Про Cloaking Detection (07:14):**
> "Когда я вводил URL, и у меня он должен был собрать данные, то, что видит Google, то, что видит юзер, сравнить их, посмотреть, Cloaca есть, нету. Если есть, то он пишет Cloaca, и пишет, типа, посмотри на вид пользователя, вид Googlebot, типа, они отличаются."

**Про проблемы с Puppeteer (08:53):**
> "Я пытался типа это реализовать там через pipekeeper. Он типа работает, но я заметил, что если с одного и того же айпишника хуярить, потом он требует авторизацию для аккаунта."

**Про хранение данных (18:04):**
> "Ты же можешь записывать в базу данных, но не всегда ее использовать на 100%, а только по запросу, чтобы тебе это не грузило систему. Данные это золото в любом случае. Зачем тебе убирать?"

**Про дедлайн (01:00):**
> "Вот эти пока три пункта в идеале выполнить. Постараться сделать до конца этого месяца."

---

## Summary

**Главная задача:** Реализовать функцию "Смотреть как Googlebot" до конца января.

**Почему важно:**
- Это "лазейка Google" для анализа конкурентов
- Позволяет видеть cloaking
- Показывает реальный canonical выбранный Google
- Must-have для Tier-1 SEO анализа

**После этого:** всё остальное (история, соцсигналы, Ahrefs, генератор) будет легко добавить.
